const { expect } = require("chai");
const { ethers } = require("hardhat");

// using alias to enable shorthand notation.
// we can now write eth('200') instead of ethers.utils.parseEther('200')
const { parseEther: eth } = ethers.utils;

describe("[ Test PoC ]", function () {
  let owner, attacker;

  before(async function () {
    /* Setup -- DO NOT TOUCH */

    [owner, attacker] = await ethers.getSigners();

    // for readibility in --trace logs.
    hre.tracer.nameTags[owner.address] = "Owner";
    hre.tracer.nameTags[attacker.address] = "Attacker";

  });


  it("can hack the target", async function () {

    console.log("\n================= 'can hack the target' Start ==============================\n");

    const killer = await (await ethers.getContractFactory("ContractKiller", attacker)).deploy();
    await killer.deployed();
    
    await killer.pwn();

    expect(await killer.isPwned(), "not pwned!").to.be.true;

    console.log("\n=================  'can hack the target' End  ==============================\n");

  });

});
